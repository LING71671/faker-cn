import re

with open("faker_cn/__init__.py", "r", encoding="utf-8") as f:
    text = f.read()

old_mapping = """        job_salary_mapping = [
            (["总", "高管", "CEO", "CTO", "CFO", "总裁", "主任"], (30000, 150000)),
            (["经理", "总监", "经理", "主管"], (12000, 45000)),
            (["架构师", "专家", "科学家"], (25000, 80000)),
            (["工程师", "开发", "程序员", "技术"], (10000, 40000)),
            (["教师", "老师", "教授", "讲师", "教员"], (5000, 25000)),
            (["医生", "护士", "医疗"], (6000, 40000)),
            (["销售", "业务", "代理"], (4000, 35000)),
            (["客服", "行政", "文员", "专员"], (4000, 12000)),
            (["司机", "快递", "外卖", "配送"], (5000, 15000)),
            (["厨师", "服务员", "营业员", "保安"], (3500, 10000)),
            (["保洁", "家政", "保姆"], (3000, 7000)),
            (["退休"], (3000, 12000)),
            (["学生", "小学", "初中", "高中", "幼儿", "无"], (0, 0))
        ]"""

new_mapping = """        job_salary_mapping = [
            # High priority specific overrides
            (["车间主任", "护理主任", "护士长", "大堂经理", "客服经理", "物业经理", "前台", "迎宾", "钟点工"], (4000, 15000)),
            (["洗碗", "清洁", "搬运", "杂工", "收废品", "足疗", "推拿", "按摩", "泥瓦工", "钢筋工", "纺织", "细纱"], (3000, 8000)),
            (["护士", "护理", "药剂师"], (4000, 15000)),
            (["医生", "医师", "主任医师", "法医"], (8000, 45000)),
            (["教师", "老师", "教授", "讲师", "教员", "助教", "教练"], (4000, 25000)),
            (["工程师", "开发", "程序员", "技术", "IT", "设计"], (8000, 45000)),
            (["架构师", "专家", "科学家", "研究员"], (20000, 80000)),
            (["客服", "行政", "文员", "专员", "出纳", "助理", "人事"], (3500, 10000)),
            (["销售", "业务", "代理", "市场", "公关", "媒介", "采购"], (4000, 30000)),
            (["司机", "快递", "外卖", "配送", "骑手", "乘务", "船员"], (5000, 12000)),
            (["厨师", "服务员", "营业员", "保安", "店员", "导购", "促销", "理发", "美容"], (3000, 8000)),
            (["保洁", "家政", "保姆", "月嫂"], (3000, 9000)),
            (["工人", "普工", "操作工", "钳工", "焊工", "木工", "电工", "水管工", "维修", "机修", "制造"], (4000, 10000)),
            (["总监", "CEO", "CTO", "CFO", "总裁", "总经理", "副总", "行长"], (30000, 150000)),
            (["经理", "主管", "主任", "领班", "组长", "厂长"], (8000, 35000)),
            (["会计", "审计", "金融", "投资", "分析师", "顾问", "律师", "法务"], (8000, 40000)),
            (["翻译", "编辑", "记者", "策划", "编导", "导演"], (6000, 25000)),
            (["演员", "模特", "歌手", "主播", "摄影", "后期", "剪辑"], (5000, 30000)),
            (["公务员", "干事", "书记", "局长", "科长", "处长", "警", "官", "军", "检察", "法官"], (5000, 18000)),
            (["退休"], (2500, 10000)),
            (["学生", "小学", "初中", "高中", "幼儿", "无"], (0, 0))
        ]"""
text = text.replace(old_mapping, new_mapping)

old_vehicle = """            if final_salary > 20000: car_prob = 0.85
            elif final_salary > 10000: car_prob = 0.60
            elif final_salary > 5000: car_prob = 0.30
            else: car_prob = 0.10"""

new_vehicle = """            if final_salary > 30000: car_prob = 0.90
            elif final_salary > 15000: car_prob = 0.65
            elif final_salary > 8000: car_prob = 0.35
            elif final_salary > 5000: car_prob = 0.10
            else: car_prob = 0.01"""
text = text.replace(old_vehicle, new_vehicle)

with open("faker_cn/__init__.py", "w", encoding="utf-8") as f:
    f.write(text)

print("Patch 6 applied: refined salary bounds and vehicle rules")
